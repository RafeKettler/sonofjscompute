// Generated by CoffeeScript 1.7.1
(function() {
  var pixels, w;

  pixels = [];

  w = new WebSocket('ws://localhost:8000/mosaic/');

  d3.select("body").append("div");

  w.onopen = function(e) {
    return w.send("1");
  };

  w.onmessage = function(e) {
    var data, message;
    message = JSON.parse(e.data);
    pixels.push(message);
    data = d3.select('body > div').selectAll("img").data(pixels);
    data.enter().append("img").attr("src", function(d) {
      return d.url;
    }).style('border-style', 'dotted');
    return data.exit().remove();
  };

}).call(this);
